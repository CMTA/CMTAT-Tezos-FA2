parameter (or (or (or (or (pair %balance_of (list %requests (pair (address %owner) (nat %token_id))) (contract %callback (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))))) (list %burn (pair (nat %token_id) (pair (nat %amount) (address %address))))) (or (pair %delete_snapshot (timestamp %snapshot_timestamp) (nat %token_id)) (list %initialise_token nat))) (or (or (unit %kill) (list %mint (pair (nat %token_id) (pair (nat %amount) (address %address))))) (or (list %pause nat) (or (pair %propose_administrator (address %proposed_administrator) (nat %token_id)) (pair %remove_administrator (address %administrator_to_remove) (nat %token_id)))))) (or (or (or (pair %schedule_snapshot (timestamp %snapshot_timestamp) (nat %token_id)) (nat %set_administrator)) (or (bytes %set_identity) (list %set_rule_engines (pair (nat %token_id) (address %rule_contract))))) (or (or (list %set_token_metadata (pair (nat %token_id) (map %token_metadata string bytes))) (list %transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))))) (or (list %unpause nat) (or (nat %unschedule_snapshot) (list %update_operators (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id))))))))));
storage   (pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))));
code
  {
    UNPAIR;     # @parameter : @storage
    IF_LEFT
      {
        IF_LEFT
          {
            IF_LEFT
              {
                IF_LEFT
                  {
                    # == balance_of ==
                    # responses = sp.local("responses", sp.list([]), sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance")))) # @parameter%balance_of : @storage
                    NIL (pair (pair address nat) nat); # list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    SWAP;       # @parameter%balance_of : list (pair (pair address nat) nat) : @storage
                    # for request in params.requests: ... # @parameter%balance_of : list (pair (pair address nat) nat) : @storage
                    DUP;        # @parameter%balance_of : @parameter%balance_of : list (pair (pair address nat) nat) : @storage
                    DUG 2;      # @parameter%balance_of : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    CAR;        # list (pair (address %owner) (nat %token_id)) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    ITER
                      {
                        # sp.verify(self.data.token_metadata.contains(request.token_id), 'FA2_TOKEN_UNDEFINED') # pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUP 4;      # @storage : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        GET 7;      # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        SWAP;       # pair (address %owner) (nat %token_id) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUP;        # pair (address %owner) (nat %token_id) : pair (address %owner) (nat %token_id) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUG 2;      # pair (address %owner) (nat %token_id) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        CDR;        # nat : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        MEM;        # bool : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        IF
                          {}
                          {
                            PUSH string "FA2_TOKEN_UNDEFINED"; # string : pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                            FAILWITH;   # FAILED
                          }; # pair (address %owner) (nat %token_id) : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        SWAP;       # list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        # responses.value.push(sp.record(request = request, balance = self.data.ledger.get(sp.set_type_expr(sp.record(owner = request.owner, token_id = request.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0))) # list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        DUP 4;      # @storage : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        DIG 2;      # pair (address %owner) (nat %token_id) : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUP;        # pair (address %owner) (nat %token_id) : pair (address %owner) (nat %token_id) : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        CDR;        # nat : pair (address %owner) (nat %token_id) : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        SWAP;       # pair (address %owner) (nat %token_id) : nat : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUP;        # pair (address %owner) (nat %token_id) : pair (address %owner) (nat %token_id) : nat : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        DUG 4;      # pair (address %owner) (nat %token_id) : nat : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        CAR;        # address : nat : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        PAIR;       # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        GET;        # option nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                          }
                          {}; # nat : list (pair (pair address nat) nat) : pair (address %owner) (nat %token_id) : @parameter%balance_of : @storage
                        DIG 2;      # pair (address %owner) (nat %token_id) : nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        PAIR;       # pair (pair (address %owner) (nat %token_id)) nat : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                        CONS;       # list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                      }; # list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    # sp.transfer(responses.value, sp.tez(0), params.callback) # list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    NIL operation; # list operation : list (pair (pair address nat) nat) : @parameter%balance_of : @storage
                    DIG 2;      # @parameter%balance_of : list operation : list (pair (pair address nat) nat) : @storage
                    CDR;        # contract (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))) : list operation : list (pair (pair address nat) nat) : @storage
                    PUSH mutez 0; # mutez : contract (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))) : list operation : list (pair (pair address nat) nat) : @storage
                    DIG 3;      # list (pair (pair address nat) nat) : mutez : contract (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance))) : list operation : @storage
                    TRANSFER_TOKENS; # operation : list operation : @storage
                    CONS;       # list operation : @storage
                  }
                  {
                    # == burn ==
                    # for token_amount in params: ... # @parameter%burn : @storage
                    DUP;        # @parameter%burn : @parameter%burn : @storage
                    ITER
                      {
                        # recipient_ledger_key = sp.local("recipient_ledger_key", sp.record(owner = token_amount.address, token_id = token_amount.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))) # pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        CAR;        # nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : @parameter%burn : @storage
                        DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : @parameter%burn : @storage
                        DUG 2;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        GET 4;      # address : nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        PAIR;       # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_amount.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        PUSH nat 1; # nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        DUP 5;      # @storage : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        DUP 4;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        CAR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        GET;        # option nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%burn : @storage
                          }
                          {}; # nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        COMPARE;    # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        EQ;         # bool : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # sp.verify(self.data.ledger[recipient_ledger_key.value] >= token_amount.amount, 'FA2_INSUFFICIENT_BALANCE') # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUG 2;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 3;      # nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 5;      # @storage : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 3;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET;        # option nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF_NONE
                          {
                            PUSH int 170; # int : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        COMPARE;    # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GE;         # bool : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF
                          {}
                          {
                            PUSH string "FA2_INSUFFICIENT_BALANCE"; # string : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # token_context = sp.local("token_context", self.data.token_context[token_amount.token_id]) # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 4;      # @storage : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        CAR;        # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF_NONE
                          {
                            PUSH int 172; # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # if token_context.value.next_snapshot.is_some(): # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 3;      # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF_NONE
                          {}
                          {
                            DROP;       # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            # if token_context.value.next_snapshot.open_some() < sp.now: # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            GET 3;      # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            IF_NONE
                              {
                                PUSH int 174; # int : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            NOW;        # @now : @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            COMPARE;    # int : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            GT;         # bool : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            IF
                              {
                                # if token_context.value.current_snapshot.is_some(): # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                CAR;        # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                IF_NONE
                                  {}
                                  {
                                    DROP;       # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                    # self.data.snapshot_lookup[sp.set_type_expr(sp.record(snapshot_timestamp = token_context.value.current_snapshot.open_some(), token_id = token_amount.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id")))] = token_context.value.next_snapshot.open_some() # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                    DIG 4;      # @storage : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 6;      # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    GET 3;      # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    IF_NONE
                                      {
                                        PUSH int 177; # int : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SOME;       # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 9;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 8;      # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # option timestamp : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    IF_NONE
                                      {
                                        PUSH int 176; # int : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair @some nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UPDATE;     # big_map (pair timestamp nat) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUG 4;      # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # token_context.value.current_snapshot = token_context.value.next_snapshot # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (option %current_snapshot timestamp) (bool %is_paused) : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                CDR;        # bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 2;      # @some : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GET 3;      # option timestamp : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PAIR;       # pair (option timestamp) bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PAIR;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # token_context.value.next_snapshot = sp.none # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                NONE timestamp; # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UPDATE 3;   # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # self.data.token_context[token_amount.token_id] = token_context.value # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 3;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 6;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # nat : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE 5;   # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 4;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {}; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # if token_context.value.current_snapshot.is_some(): # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        IF_NONE
                          {
                            DROP;       # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }
                          {
                            DROP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # recipient_snapshot_ledger_key = sp.local("recipient_snapshot_ledger_key", sp.record(token_id = token_amount.token_id, owner = token_amount.address, snapshot_timestamp = token_context.value.current_snapshot.open_some()), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF_NONE
                              {
                                PUSH int 183; # int : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DIG 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 4;      # address : pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 5;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # nat : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            PAIR 3;     # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # if ~ (self.data.snapshot_ledger.contains(recipient_snapshot_ledger_key.value)): # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 6;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 3;      # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair nat (pair address @some) : pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 2;      # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            MEM;        # bool : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF
                              {}
                              {
                                # self.data.snapshot_ledger[recipient_snapshot_ledger_key.value] = self.data.ledger.get(recipient_ledger_key.value, default_value = 0) # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 6;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 8;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET;        # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                IF_NONE
                                  {
                                    PUSH nat 0; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                  }
                                  {}; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 6;      # pair nat (pair address @some) : option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 5;      # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }; # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # snapshot_lookup_key = sp.local("snapshot_lookup_key", sp.record(snapshot_timestamp = token_context.value.current_snapshot.open_some(), token_id = token_amount.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id"))) # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 4;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 3;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # pair (option timestamp) bool : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # option timestamp : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF_NONE
                              {
                                PUSH int 186; # int : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            PAIR;       # pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # if ~ (self.data.snapshot_total_supply.contains(snapshot_lookup_key.value)): # pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 3;      # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair @some nat : pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 2;      # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            MEM;        # bool : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF
                              {
                                DROP 3;     # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {
                                SWAP;       # pair nat (pair address @some) : pair @some nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DROP;       # pair @some nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DROP;       # pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # self.data.snapshot_total_supply[snapshot_lookup_key.value] = self.data.total_supply.get(token_amount.token_id, default_value = 0) # pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 5;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair timestamp nat) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 8;      # big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 9;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # nat : big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET;        # option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                IF_NONE
                                  {
                                    PUSH nat 0; # nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                  }
                                  {}; # nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DIG 6;      # pair @some nat : option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map (pair timestamp nat) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # big_map (pair timestamp nat) timestamp : big_map (pair timestamp nat) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat) : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 3;      # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # self.data.ledger[recipient_ledger_key.value] = sp.as_nat(self.data.ledger.get(recipient_ledger_key.value, default_value = 0) - token_amount.amount) # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 7;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 3;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 8;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET;        # option nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                          }
                          {}; # nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SUB;        # int : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        ISNAT;      # option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH int 190; # int : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SOME;       # option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 7;      # pair address nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        # self.data.total_supply[token_amount.token_id] = sp.as_nat(self.data.total_supply.get(token_amount.token_id, default_value = 0) - token_amount.amount) # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUG 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 8;      # big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 4;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 3;      # nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DIG 6;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET 8;      # big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 6;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # nat : big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET;        # option nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                          }
                          {}; # nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SUB;        # int : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        ISNAT;      # option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH int 191; # int : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SOME;       # option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 5;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # nat : option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE;     # big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE 8;   # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUG 3;      # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # if self.data.ledger[recipient_ledger_key.value] == 0: # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        PUSH nat 0; # nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 5;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 5;      # big_map (pair address nat) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 3;      # pair address nat : big_map (pair address nat) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET;        # option nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        IF_NONE
                          {
                            PUSH int 193; # int : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        COMPARE;    # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        EQ;         # bool : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        IF
                          {
                            SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DROP;       # pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # del self.data.ledger[recipient_ledger_key.value] # pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DIG 2;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            SWAP;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            UNPAIR;     # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            SWAP;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            UNPAIR;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            NONE nat;   # option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            DIG 6;      # pair address nat : option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                            SWAP;       # list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }
                          {
                            DROP 2;     # list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                      }; # @parameter%burn : @storage
                    DROP;       # @storage
                    NIL operation; # list operation : @storage
                  }; # list operation : @storage
              }
              {
                IF_LEFT
                  {
                    # == delete_snapshot ==
                    # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @parameter%delete_snapshot : @storage
                    PUSH nat 1; # nat : @parameter%delete_snapshot : @storage
                    DUP 3;      # @storage : nat : @parameter%delete_snapshot : @storage
                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @parameter%delete_snapshot : @storage
                    CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : @parameter%delete_snapshot : @storage
                    CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%delete_snapshot : @storage
                    DUP 3;      # @parameter%delete_snapshot : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%delete_snapshot : @storage
                    CDR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%delete_snapshot : @storage
                    SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%delete_snapshot : @storage
                    PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%delete_snapshot : @storage
                    GET;        # option nat : nat : @parameter%delete_snapshot : @storage
                    IF_NONE
                      {
                        PUSH nat 0; # nat : nat : @parameter%delete_snapshot : @storage
                      }
                      {}; # nat : nat : @parameter%delete_snapshot : @storage
                    COMPARE;    # int : @parameter%delete_snapshot : @storage
                    EQ;         # bool : @parameter%delete_snapshot : @storage
                    IF
                      {}
                      {
                        PUSH string "ADM_NOT_ADMIN"; # string : @parameter%delete_snapshot : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%delete_snapshot : @storage
                    SWAP;       # @storage : @parameter%delete_snapshot
                    # del self.data.snapshot_lookup[params] # @storage : @parameter%delete_snapshot
                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%delete_snapshot
                    SWAP;       # pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    UNPAIR;     # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    SWAP;       # pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    UNPAIR;     # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    NONE timestamp; # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter%delete_snapshot
                    DIG 6;      # @parameter%delete_snapshot : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    UPDATE;     # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    PAIR;       # pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    PAIR;       # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    PAIR;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))
                    SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                  }
                  {
                    # == initialise_token ==
                    # for token_id in params: ... # @parameter%initialise_token : @storage
                    DUP;        # @parameter%initialise_token : @parameter%initialise_token : @storage
                    ITER
                      {
                        # sp.verify(~ (self.data.token_context.contains(token_id)), 'CM_TOKEN_EXISTS') # nat : @parameter%initialise_token : @storage
                        DUP 3;      # @storage : nat : @parameter%initialise_token : @storage
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : @parameter%initialise_token : @storage
                        SWAP;       # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%initialise_token : @storage
                        DUP;        # nat : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%initialise_token : @storage
                        DUG 2;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : @parameter%initialise_token : @storage
                        MEM;        # bool : nat : @parameter%initialise_token : @storage
                        IF
                          {
                            PUSH string "CM_TOKEN_EXISTS"; # string : nat : @parameter%initialise_token : @storage
                            FAILWITH;   # FAILED
                          }
                          {}; # nat : @parameter%initialise_token : @storage
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # nat : @parameter%initialise_token : @storage
                        PUSH nat 1; # nat : nat : @parameter%initialise_token : @storage
                        DUP 4;      # @storage : nat : nat : @parameter%initialise_token : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : nat : @parameter%initialise_token : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : nat : @parameter%initialise_token : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%initialise_token : @storage
                        DUP 3;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%initialise_token : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%initialise_token : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%initialise_token : @storage
                        GET;        # option nat : nat : nat : @parameter%initialise_token : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : nat : @parameter%initialise_token : @storage
                          }
                          {}; # nat : nat : nat : list nat : @storage
                        COMPARE;    # int : nat : list nat : @storage
                        EQ;         # bool : nat : list nat : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : nat : list nat : @storage
                            FAILWITH;   # FAILED
                          }; # nat : list nat : @storage
                        # self.data.token_context[token_id] = sp.record(current_snapshot = sp.none, is_paused = False, next_snapshot = sp.none, validate_transfer_rule_contract = sp.address('tz1YtuZ4vhzzn7ssCt93Put8U9UJDdvCXci4')) # nat : list nat : @storage
                        DIG 2;      # @storage : nat : list nat
                        DUP;        # @storage : @storage : nat : list nat
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PUSH (option (pair (pair (option timestamp) bool) (pair (option timestamp) address))) (Some (Pair (Pair None False) (Pair None "tz1YtuZ4vhzzn7ssCt93Put8U9UJDdvCXci4"))); # option (pair (pair (option timestamp) bool) (pair (option timestamp) address)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DIG 3;      # nat : option (pair (pair (option timestamp) bool) (pair (option timestamp) address)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list nat
                        UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option timestamp) address)) : @storage : list nat
                        UPDATE 5;   # @storage : list nat
                        SWAP;       # list nat : @storage
                      }; # @parameter%initialise_token : @storage
                    DROP;       # @storage
                  }; # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                NIL operation; # list operation : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
              }; # list operation : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
          }
          {
            IF_LEFT
              {
                IF_LEFT
                  {
                    DROP;       # @storage
                    # == kill ==
                    # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = 0), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @storage
                    DUP;        # @storage : @storage
                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @storage
                    CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : @storage
                    CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : @storage
                    PUSH nat 1; # nat : big_map (pair (address %owner) (nat %token_id)) nat : @storage
                    SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : nat : @storage
                    PUSH nat 0; # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @storage
                    SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @storage
                    PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @storage
                    GET;        # option nat : nat : @storage
                    IF_NONE
                      {
                        PUSH nat 0; # nat : nat : @storage
                      }
                      {}; # nat : nat : @storage
                    COMPARE;    # int : @storage
                    EQ;         # bool : @storage
                    IF
                      {}
                      {
                        PUSH string "ADM_NOT_ADMIN"; # string : @storage
                        FAILWITH;   # FAILED
                      }; # @storage
                    # self.data.ledger = sp.set_type_expr({}, sp.TBigMap(sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")), sp.TNat)) # @storage
                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    CDR;        # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    CDR;        # big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    EMPTY_BIG_MAP (pair address nat) nat; # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    # self.data.administrator_allowmap = sp.set_type_expr({}, sp.TMap(sp.TAddress, sp.TUnit)) # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    EMPTY_MAP address unit; # map address unit : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    # self.data.administrators = sp.set_type_expr({}, sp.TBigMap(sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")), sp.TNat)) # map address unit : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    EMPTY_BIG_MAP (pair address nat) nat; # big_map (pair address nat) nat : map address unit : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # map address unit : big_map (pair address nat) nat : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    # self.data.token_metadata = sp.set_type_expr({}, sp.TBigMap(sp.TNat, sp.TRecord(token_id = sp.TNat, token_metadata = sp.TMap(sp.TString, sp.TBytes)).layout(("token_id", "token_metadata")))) # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    EMPTY_BIG_MAP nat (pair nat (map string bytes)); # big_map nat (pair nat (map string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    UPDATE 7;   # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    # self.data.total_supply = sp.set_type_expr({}, sp.TBigMap(sp.TNat, sp.TNat)) # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    EMPTY_BIG_MAP nat nat; # big_map nat nat : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    UPDATE 8;   # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    # self.data.operators = sp.set_type_expr({}, sp.TBigMap(sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("token_id", ("owner", "operator"))), sp.TUnit)) # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    UNPAIR;     # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UNPAIR;     # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UNPAIR;     # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    CAR;        # big_map (pair address nat) nat : big_map address bytes : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    EMPTY_BIG_MAP (pair nat (pair address address)) unit; # big_map (pair nat (pair address address)) unit : big_map (pair address nat) nat : big_map address bytes : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # big_map (pair address nat) nat : big_map (pair nat (pair address address)) unit : big_map address bytes : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit) : big_map address bytes : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    # self.data.token_context = sp.set_type_expr({}, sp.TBigMap(sp.TNat, sp.TRecord(current_snapshot = sp.TOption(sp.TTimestamp), is_paused = sp.TBool, next_snapshot = sp.TOption(sp.TTimestamp), validate_transfer_rule_contract = sp.TAddress).layout((("current_snapshot", "is_paused"), ("next_snapshot", "validate_transfer_rule_contract"))))) # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    EMPTY_BIG_MAP nat (pair (pair (option timestamp) bool) (pair (option timestamp) address)); # big_map nat (pair (pair (option timestamp) bool) (pair (option timestamp) address)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    UPDATE 5;   # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    # self.data.identities = sp.set_type_expr({}, sp.TBigMap(sp.TAddress, sp.TBytes)) # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                    UNPAIR;     # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UNPAIR;     # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    CDR;        # pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    EMPTY_BIG_MAP address bytes; # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (map address unit) (big_map (pair address nat) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                  }
                  {
                    # == mint ==
                    # for token_amount in params: ... # @parameter%mint : @storage
                    DUP;        # @parameter%mint : @parameter%mint : @storage
                    ITER
                      {
                        # recipient_ledger_key = sp.local("recipient_ledger_key", sp.record(owner = token_amount.address, token_id = token_amount.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))) # pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        CAR;        # nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : @parameter%mint : @storage
                        DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : @parameter%mint : @storage
                        DUG 2;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        GET 4;      # address : nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        PAIR;       # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_amount.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        PUSH nat 1; # nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        DUP 5;      # @storage : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        DUP 4;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        CAR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        GET;        # option nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : @parameter%mint : @storage
                          }
                          {}; # nat : nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        COMPARE;    # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        EQ;         # bool : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # sp.verify(self.data.token_metadata.contains(token_amount.token_id), 'FA2_TOKEN_UNDEFINED') # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 4;      # @storage : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 7;      # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        CAR;        # nat : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        MEM;        # bool : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF
                          {}
                          {
                            PUSH string "FA2_TOKEN_UNDEFINED"; # string : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # token_context = sp.local("token_context", self.data.token_context[token_amount.token_id]) # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 4;      # @storage : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        CAR;        # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF_NONE
                          {
                            PUSH int 139; # int : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        # if token_context.value.next_snapshot.is_some(): # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        GET 3;      # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                        IF_NONE
                          {}
                          {
                            DROP;       # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            # if token_context.value.next_snapshot.open_some() < sp.now: # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            GET 3;      # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            IF_NONE
                              {
                                PUSH int 142; # int : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            NOW;        # @now : @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            COMPARE;    # int : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            GT;         # bool : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                            IF
                              {
                                # if token_context.value.current_snapshot.is_some(): # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                CAR;        # option timestamp : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                IF_NONE
                                  {}
                                  {
                                    DROP;       # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                    # self.data.snapshot_lookup[sp.set_type_expr(sp.record(snapshot_timestamp = token_context.value.current_snapshot.open_some(), token_id = token_amount.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id")))] = token_context.value.next_snapshot.open_some() # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : @storage
                                    DIG 4;      # @storage : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UNPAIR;     # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 6;      # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    GET 3;      # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    IF_NONE
                                      {
                                        PUSH int 145; # int : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SOME;       # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 9;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUP 8;      # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    CAR;        # option timestamp : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    IF_NONE
                                      {
                                        PUSH int 144; # int : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair @some nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    UPDATE;     # big_map (pair timestamp nat) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                    DUG 4;      # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # token_context.value.current_snapshot = token_context.value.next_snapshot # @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP;        # @some : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (option %current_snapshot timestamp) (bool %is_paused) : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                CDR;        # bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 2;      # @some : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GET 3;      # option timestamp : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PAIR;       # pair (option timestamp) bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PAIR;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # token_context.value.next_snapshot = sp.none # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                NONE timestamp; # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UPDATE 3;   # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # self.data.token_context[token_amount.token_id] = token_context.value # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 3;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 6;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # nat : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE 5;   # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 4;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {}; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # if token_context.value.current_snapshot.is_some(): # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        IF_NONE
                          {
                            DROP;       # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }
                          {
                            DROP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # recipient_snapshot_ledger_key = sp.local("recipient_snapshot_ledger_key", sp.record(token_id = token_amount.token_id, owner = token_amount.address, snapshot_timestamp = token_context.value.current_snapshot.open_some()), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF_NONE
                              {
                                PUSH int 151; # int : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DIG 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 4;      # address : pair (nat %token_id) (pair (nat %amount) (address %address)) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 5;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # nat : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            PAIR 3;     # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # if ~ (self.data.snapshot_ledger.contains(recipient_snapshot_ledger_key.value)): # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 6;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 3;      # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair nat (pair address @some) : pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 2;      # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            MEM;        # bool : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF
                              {}
                              {
                                # self.data.snapshot_ledger[recipient_snapshot_ledger_key.value] = self.data.ledger.get(recipient_ledger_key.value, default_value = 0) # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 6;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 8;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET;        # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                IF_NONE
                                  {
                                    PUSH nat 0; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                  }
                                  {}; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 6;      # pair nat (pair address @some) : option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 5;      # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }; # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # snapshot_lookup_key = sp.local("snapshot_lookup_key", sp.record(snapshot_timestamp = token_context.value.current_snapshot.open_some(), token_id = token_amount.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id"))) # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 4;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 3;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # pair (option timestamp) bool : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            CAR;        # option timestamp : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF_NONE
                              {
                                PUSH int 154; # int : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            PAIR;       # pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            # if ~ (self.data.snapshot_total_supply.contains(snapshot_lookup_key.value)): # pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 3;      # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            SWAP;       # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUP;        # pair @some nat : pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            DUG 2;      # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            MEM;        # bool : pair @some nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                            IF
                              {
                                DROP 3;     # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {
                                SWAP;       # pair nat (pair address @some) : pair @some nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DROP;       # pair @some nat : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DROP;       # pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # self.data.snapshot_total_supply[snapshot_lookup_key.value] = self.data.total_supply.get(token_amount.token_id, default_value = 0) # pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 5;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                UNPAIR;     # big_map (pair timestamp nat) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                SWAP;       # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET 8;      # big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUP 9;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                CAR;        # nat : big_map nat nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                GET;        # option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                IF_NONE
                                  {
                                    PUSH nat 0; # nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                  }
                                  {}; # nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SOME;       # option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair @some nat : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DIG 6;      # pair @some nat : option nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                UPDATE;     # big_map (pair timestamp nat) nat : big_map (pair timestamp nat) timestamp : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # big_map (pair timestamp nat) timestamp : big_map (pair timestamp nat) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat) : big_map (pair nat (pair address timestamp)) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                                DUG 3;      # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # self.data.ledger[recipient_ledger_key.value] = self.data.ledger.get(recipient_ledger_key.value, default_value = 0) + token_amount.amount # pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        UNPAIR;     # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 7;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 3;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DIG 9;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 8;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET;        # option nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                          }
                          {}; # nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        ADD;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SOME;       # option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DIG 6;      # pair address nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        # self.data.total_supply[token_amount.token_id] = self.data.total_supply.get(token_amount.token_id, default_value = 0) + token_amount.amount # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUG 3;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 8;      # big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DUP 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        GET 3;      # nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DIG 5;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET 8;      # big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DUP 5;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # nat : big_map nat nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        GET;        # option nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                          }
                          {}; # nat : nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        ADD;        # nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SOME;       # option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (pair (nat %amount) (address %address)) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        DIG 3;      # pair (nat %token_id) (pair (nat %amount) (address %address)) : option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        CAR;        # nat : option nat : big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE;     # big_map nat nat : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        UPDATE 8;   # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (pair (nat %amount) (address %address)))
                        SWAP;       # list (pair (nat %token_id) (pair (nat %amount) (address %address))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair timestamp nat) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                      }; # @parameter%mint : @storage
                    DROP;       # @storage
                  }; # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
              }
              {
                IF_LEFT
                  {
                    # == pause ==
                    # for token_id in params: ... # @parameter%pause : @storage
                    DUP;        # @parameter%pause : @parameter%pause : @storage
                    ITER
                      {
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # nat : @parameter%pause : @storage
                        PUSH nat 1; # nat : nat : @parameter%pause : @storage
                        DUP 4;      # @storage : nat : nat : @parameter%pause : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : nat : @parameter%pause : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : nat : @parameter%pause : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%pause : @storage
                        DUP 3;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%pause : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%pause : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%pause : @storage
                        GET;        # option nat : nat : nat : @parameter%pause : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : nat : @parameter%pause : @storage
                          }
                          {}; # nat : nat : nat : list nat : @storage
                        COMPARE;    # int : nat : list nat : @storage
                        EQ;         # bool : nat : list nat : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : nat : list nat : @storage
                            FAILWITH;   # FAILED
                          }; # nat : list nat : @storage
                        # self.data.token_context[token_id].is_paused = True # nat : list nat : @storage
                        DIG 2;      # @storage : nat : list nat
                        DUP;        # @storage : @storage : nat : list nat
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP;        # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP 4;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP;        # nat : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUG 2;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        IF_NONE
                          {
                            PUSH int 204; # int : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UNPAIR;     # pair (option %current_snapshot timestamp) (bool %is_paused) : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        CAR;        # option timestamp : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PUSH bool True; # bool : option timestamp : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SWAP;       # option timestamp : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PAIR;       # pair (option timestamp) bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PAIR;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SOME;       # option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SWAP;       # nat : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UPDATE 5;   # @storage : nat : list nat
                        # self.data.token_context[token_id] = self.data.token_context[token_id] # @storage : nat : list nat
                        DUP;        # @storage : @storage : nat : list nat
                        DUG 3;      # @storage : nat : list nat : @storage
                        DUP;        # @storage : @storage : nat : list nat : @storage
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat : @storage
                        DIG 4;      # @storage : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP 4;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        IF_NONE
                          {
                            PUSH int 203; # int : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SOME;       # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DIG 3;      # nat : option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list nat
                        UPDATE;     # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list nat
                        UPDATE 5;   # @storage : list nat
                        SWAP;       # list nat : @storage
                      }; # @parameter%pause : @storage
                    DROP;       # @storage
                  }
                  {
                    IF_LEFT
                      {
                        # == propose_administrator ==
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @parameter%propose_administrator : @storage
                        PUSH nat 1; # nat : @parameter%propose_administrator : @storage
                        DUP 3;      # @storage : nat : @parameter%propose_administrator : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @parameter%propose_administrator : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : @parameter%propose_administrator : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%propose_administrator : @storage
                        DUP 3;      # @parameter%propose_administrator : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%propose_administrator : @storage
                        CDR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%propose_administrator : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%propose_administrator : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%propose_administrator : @storage
                        GET;        # option nat : nat : @parameter%propose_administrator : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : @parameter%propose_administrator : @storage
                          }
                          {}; # nat : nat : @parameter%propose_administrator : @storage
                        COMPARE;    # int : @parameter%propose_administrator : @storage
                        EQ;         # bool : @parameter%propose_administrator : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : @parameter%propose_administrator : @storage
                            FAILWITH;   # FAILED
                          }; # @parameter%propose_administrator : @storage
                        SWAP;       # @storage : @parameter%propose_administrator
                        # self.data.administrators[sp.set_type_expr(sp.record(owner = params.proposed_administrator, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))] = 2 # @storage : @parameter%propose_administrator
                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%propose_administrator
                        UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%propose_administrator
                        UNPAIR;     # map address unit : big_map (pair (address %owner) (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%propose_administrator
                        SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%propose_administrator
                        PUSH (option nat) (Some 2); # option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%propose_administrator
                        DIG 5;      # @parameter%propose_administrator : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        UPDATE;     # big_map (pair address (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        SWAP;       # map address unit : big_map (pair address (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (map address unit) (big_map (pair address (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                      }
                      {
                        # == remove_administrator ==
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @parameter%remove_administrator : @storage
                        PUSH nat 1; # nat : @parameter%remove_administrator : @storage
                        DUP 3;      # @storage : nat : @parameter%remove_administrator : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @parameter%remove_administrator : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : @parameter%remove_administrator : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%remove_administrator : @storage
                        DUP 3;      # @parameter%remove_administrator : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%remove_administrator : @storage
                        CDR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%remove_administrator : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%remove_administrator : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%remove_administrator : @storage
                        GET;        # option nat : nat : @parameter%remove_administrator : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : @parameter%remove_administrator : @storage
                          }
                          {}; # nat : nat : @parameter%remove_administrator : @storage
                        COMPARE;    # int : @parameter%remove_administrator : @storage
                        EQ;         # bool : @parameter%remove_administrator : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : @parameter%remove_administrator : @storage
                            FAILWITH;   # FAILED
                          }; # @parameter%remove_administrator : @storage
                        SWAP;       # @storage : @parameter%remove_administrator
                        # del self.data.administrators[sp.set_type_expr(sp.record(owner = params.administrator_to_remove, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))] # @storage : @parameter%remove_administrator
                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%remove_administrator
                        UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%remove_administrator
                        UNPAIR;     # map address unit : big_map (pair (address %owner) (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%remove_administrator
                        SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%remove_administrator
                        NONE nat;   # option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%remove_administrator
                        DIG 5;      # @parameter%remove_administrator : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        UPDATE;     # big_map (pair address (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        SWAP;       # map address unit : big_map (pair address (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (map address unit) (big_map (pair address (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                        PAIR;       # pair (pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                      }; # pair (pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                  }; # pair (pair (pair (map address unit) (big_map (pair address (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
              }; # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
            NIL operation; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
          }; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
      }
      {
        IF_LEFT
          {
            IF_LEFT
              {
                IF_LEFT
                  {
                    # == schedule_snapshot ==
                    # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @parameter%schedule_snapshot : @storage
                    PUSH nat 1; # nat : @parameter%schedule_snapshot : @storage
                    DUP 3;      # @storage : nat : @parameter%schedule_snapshot : @storage
                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @parameter%schedule_snapshot : @storage
                    CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : @parameter%schedule_snapshot : @storage
                    CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%schedule_snapshot : @storage
                    DUP 3;      # @parameter%schedule_snapshot : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%schedule_snapshot : @storage
                    CDR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%schedule_snapshot : @storage
                    SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%schedule_snapshot : @storage
                    PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%schedule_snapshot : @storage
                    GET;        # option nat : nat : @parameter%schedule_snapshot : @storage
                    IF_NONE
                      {
                        PUSH nat 0; # nat : nat : @parameter%schedule_snapshot : @storage
                      }
                      {}; # nat : nat : @parameter%schedule_snapshot : @storage
                    COMPARE;    # int : @parameter%schedule_snapshot : @storage
                    EQ;         # bool : @parameter%schedule_snapshot : @storage
                    IF
                      {}
                      {
                        PUSH string "ADM_NOT_ADMIN"; # string : @parameter%schedule_snapshot : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%schedule_snapshot : @storage
                    SWAP;       # @storage : @parameter%schedule_snapshot
                    # sp.verify(self.data.token_context[params.token_id].next_snapshot.is_variant('None'), 'CM_ALREADY_SCHEDULED') # @storage : @parameter%schedule_snapshot
                    DUP;        # @storage : @storage : @parameter%schedule_snapshot
                    DUG 2;      # @storage : @parameter%schedule_snapshot : @storage
                    GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%schedule_snapshot : @storage
                    SWAP;       # @parameter%schedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    DUP;        # @parameter%schedule_snapshot : @parameter%schedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    DUG 2;      # @parameter%schedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%schedule_snapshot : @storage
                    CDR;        # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%schedule_snapshot : @storage
                    GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%schedule_snapshot : @storage
                    IF_NONE
                      {
                        PUSH int 232; # int : @parameter%schedule_snapshot : @storage
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : @parameter%schedule_snapshot : @storage
                    GET 3;      # option timestamp : @parameter%schedule_snapshot : @storage
                    IF_NONE
                      {}
                      {
                        PUSH string "CM_ALREADY_SCHEDULED"; # string : @some : @parameter%schedule_snapshot : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%schedule_snapshot : @storage
                    # sp.verify(sp.now < params.snapshot_timestamp, 'CM_SNAPSHOT_IN_PAST') # @parameter%schedule_snapshot : @storage
                    DUP;        # @parameter%schedule_snapshot : @parameter%schedule_snapshot : @storage
                    CAR;        # timestamp : @parameter%schedule_snapshot : @storage
                    NOW;        # @now : timestamp : @parameter%schedule_snapshot : @storage
                    COMPARE;    # int : @parameter%schedule_snapshot : @storage
                    LT;         # bool : @parameter%schedule_snapshot : @storage
                    IF
                      {}
                      {
                        PUSH string "CM_SNAPSHOT_IN_PAST"; # string : @parameter%schedule_snapshot : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%schedule_snapshot : @storage
                    SWAP;       # @storage : @parameter%schedule_snapshot
                    # self.data.token_context[params.token_id].next_snapshot = sp.some(params.snapshot_timestamp) # @storage : @parameter%schedule_snapshot
                    DUP;        # @storage : @storage : @parameter%schedule_snapshot
                    GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    DUP;        # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    DUP 4;      # @parameter%schedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    CDR;        # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    DUP;        # nat : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    DUG 2;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    IF_NONE
                      {
                        PUSH int 234; # int : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                        FAILWITH;   # FAILED
                      }
                      {}; # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%schedule_snapshot
                    DIG 4;      # @parameter%schedule_snapshot : @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    CAR;        # timestamp : @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    SOME;       # option timestamp : @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    UPDATE 3;   # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    SOME;       # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    SWAP;       # nat : option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    UPDATE;     # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                    UPDATE 5;   # @storage
                  }
                  {
                    # == set_administrator ==
                    # administrator_ledger_key = sp.local("administrator_ledger_key", sp.record(owner = sp.sender, token_id = params), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))) # @parameter%set_administrator : @storage
                    SENDER;     # @sender : @parameter%set_administrator : @storage
                    PAIR;       # pair @sender @parameter%set_administrator : @storage
                    # sp.verify(self.data.administrators.get(administrator_ledger_key.value, default_value = 0) == 2, 'ADM_NOT_ADMIN') # pair @sender @parameter%set_administrator : @storage
                    PUSH nat 2; # nat : pair @sender @parameter%set_administrator : @storage
                    DUP 3;      # @storage : nat : pair @sender @parameter%set_administrator : @storage
                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair @sender @parameter%set_administrator : @storage
                    CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair @sender @parameter%set_administrator : @storage
                    CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair @sender @parameter%set_administrator : @storage
                    DUP 3;      # pair @sender @parameter%set_administrator : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair @sender @parameter%set_administrator : @storage
                    GET;        # option nat : nat : pair @sender @parameter%set_administrator : @storage
                    IF_NONE
                      {
                        PUSH nat 0; # nat : nat : pair @sender @parameter%set_administrator : @storage
                      }
                      {}; # nat : nat : pair @sender @parameter%set_administrator : @storage
                    COMPARE;    # int : pair @sender @parameter%set_administrator : @storage
                    EQ;         # bool : pair @sender @parameter%set_administrator : @storage
                    IF
                      {}
                      {
                        PUSH string "ADM_NOT_ADMIN"; # string : pair @sender @parameter%set_administrator : @storage
                        FAILWITH;   # FAILED
                      }; # pair @sender @parameter%set_administrator : @storage
                    SWAP;       # @storage : pair @sender @parameter%set_administrator
                    # self.data.administrators[administrator_ledger_key.value] = 1 # @storage : pair @sender @parameter%set_administrator
                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @sender @parameter%set_administrator
                    UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @sender @parameter%set_administrator
                    UNPAIR;     # map address unit : big_map (pair (address %owner) (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @sender @parameter%set_administrator
                    SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @sender @parameter%set_administrator
                    PUSH (option nat) (Some 1); # option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair @sender @parameter%set_administrator
                    DIG 5;      # pair @sender @parameter%set_administrator : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UPDATE;     # big_map (pair address nat) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # map address unit : big_map (pair address nat) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                  }; # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
              }
              {
                IF_LEFT
                  {
                    SWAP;       # @storage : @parameter%set_identity
                    # == set_identity ==
                    # self.data.identities[sp.sender] = params # @storage : @parameter%set_identity
                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%set_identity
                    UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%set_identity
                    SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%set_identity
                    UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%set_identity
                    DIG 4;      # @parameter%set_identity : big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SOME;       # option bytes : big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SENDER;     # @sender : option bytes : big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    UPDATE;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))
                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                  }
                  {
                    # == set_rule_engines ==
                    # for rule in params: ... # @parameter%set_rule_engines : @storage
                    DUP;        # @parameter%set_rule_engines : @parameter%set_rule_engines : @storage
                    ITER
                      {
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = rule.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        PUSH nat 1; # nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        DUP 4;      # @storage : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        DUP 3;      # pair (nat %token_id) (address %rule_contract) : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        CAR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        GET;        # option nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : pair (nat %token_id) (address %rule_contract) : @parameter%set_rule_engines : @storage
                          }
                          {}; # nat : nat : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                        COMPARE;    # int : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                        EQ;         # bool : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                            FAILWITH;   # FAILED
                          }; # pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                        # self.data.token_context[rule.token_id].validate_transfer_rule_contract = rule.rule_contract # pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract)) : @storage
                        DIG 2;      # @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DUP;        # @storage : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DUP;        # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DUP 4;      # pair (nat %token_id) (address %rule_contract) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        CAR;        # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DUP;        # nat : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DUG 2;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        IF_NONE
                          {
                            PUSH int 225; # int : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : pair (nat %token_id) (address %rule_contract) : list (pair (nat %token_id) (address %rule_contract))
                        DIG 4;      # pair (nat %token_id) (address %rule_contract) : @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        CDR;        # address : @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        UPDATE 4;   # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        SOME;       # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        SWAP;       # nat : option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        UPDATE;     # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list (pair (nat %token_id) (address %rule_contract))
                        UPDATE 5;   # @storage : list (pair (nat %token_id) (address %rule_contract))
                        SWAP;       # list (pair (nat %token_id) (address %rule_contract)) : @storage
                      }; # @parameter%set_rule_engines : @storage
                    DROP;       # @storage
                  }; # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
              }; # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
            NIL operation; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
          }
          {
            IF_LEFT
              {
                IF_LEFT
                  {
                    # == set_token_metadata ==
                    # for token_metadata in params: ... # @parameter%set_token_metadata : @storage
                    DUP;        # @parameter%set_token_metadata : @parameter%set_token_metadata : @storage
                    ITER
                      {
                        # if self.data.token_metadata.contains(token_metadata.token_id): # pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        DUP 3;      # @storage : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        GET 7;      # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        SWAP;       # pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : @parameter%set_token_metadata : @storage
                        DUP;        # pair (nat %token_id) (map %token_metadata string bytes) : pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : @parameter%set_token_metadata : @storage
                        DUG 2;      # pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        CAR;        # nat : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        MEM;        # bool : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                        IF
                          {
                            # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_metadata.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            PUSH nat 1; # nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            DUP 4;      # @storage : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            DUP 3;      # pair (nat %token_id) (map %token_metadata string bytes) : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            GET;        # option nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            IF_NONE
                              {
                                PUSH nat 0; # nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                              }
                              {}; # nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                            COMPARE;    # int : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                            EQ;         # bool : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                            IF
                              {}
                              {
                                PUSH string "ADM_NOT_ADMIN"; # string : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                                FAILWITH;   # FAILED
                              }; # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                          }
                          {
                            # if sp.len(self.data.administrator_allowmap) > 0: # pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            PUSH nat 0; # nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            DUP 4;      # @storage : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            CAR;        # map address unit : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            SIZE;       # nat : nat : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            COMPARE;    # int : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            GT;         # bool : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                            IF
                              {
                                # sp.verify(self.data.administrator_allowmap.contains(sp.sender), 'ADM_NOT_ADMIN') # pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                DUP 3;      # @storage : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                CAR;        # map address unit : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                SENDER;     # @sender : map address unit : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                MEM;        # bool : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                IF
                                  {}
                                  {
                                    PUSH string "ADM_NOT_ADMIN"; # string : pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                                    FAILWITH;   # FAILED
                                  }; # pair (nat %token_id) (map %token_metadata string bytes) : @parameter%set_token_metadata : @storage
                              }
                              {}; # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                            # self.data.administrators[sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_metadata.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))] = 1 # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : @storage
                            DIG 2;      # @storage : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            UNPAIR;     # map address unit : big_map (pair (address %owner) (nat %token_id)) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            PUSH (option nat) (Some 1); # option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            DUP 6;      # pair (nat %token_id) (map %token_metadata string bytes) : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            CAR;        # nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            SENDER;     # @sender : nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            PAIR;       # pair @sender nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            UPDATE;     # big_map (pair address nat) nat : map address unit : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            SWAP;       # map address unit : big_map (pair address nat) nat : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            PAIR;       # pair (map address unit) (big_map (pair address nat) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            PAIR;       # pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            PAIR;       # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                            DUG 2;      # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        # self.data.token_metadata[token_metadata.token_id] = token_metadata # pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                        DIG 2;      # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        DUP;        # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        GET 7;      # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (nat %token_id) (map %token_metadata string bytes) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        DIG 2;      # pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        DUP;        # pair (nat %token_id) (map %token_metadata string bytes) : pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        SOME;       # option (pair (nat %token_id) (map %token_metadata string bytes)) : pair (nat %token_id) (map %token_metadata string bytes) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        SWAP;       # pair (nat %token_id) (map %token_metadata string bytes) : option (pair (nat %token_id) (map %token_metadata string bytes)) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        CAR;        # nat : option (pair (nat %token_id) (map %token_metadata string bytes)) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        UPDATE;     # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        UPDATE 7;   # pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : list (pair (nat %token_id) (map %token_metadata string bytes))
                        SWAP;       # list (pair (nat %token_id) (map %token_metadata string bytes)) : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                      }; # @parameter%set_token_metadata : @storage
                    DROP;       # @storage
                    NIL operation; # list operation : @storage
                  }
                  {
                    # == transfer ==
                    # for transfer in params: ... # @parameter%transfer : @storage
                    DUP;        # @parameter%transfer : @parameter%transfer : @storage
                    NIL operation; # list operation : @parameter%transfer : @parameter%transfer : @storage
                    SWAP;       # @parameter%transfer : list operation : @parameter%transfer : @storage
                    ITER
                      {
                        # for tx in transfer.txs: ... # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                        DUP;        # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                        CDR;        # list (pair (address %to_) (pair (nat %token_id) (nat %amount))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                        ITER
                          {
                            # from_user = sp.local("from_user", sp.record(owner = transfer.from_, token_id = tx.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))) # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP;        # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET 3;      # nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP 3;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            CAR;        # address : nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            PAIR;       # pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            SWAP;       # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            # to_user = sp.local("to_user", sp.record(owner = tx.to_, token_id = tx.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))) # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP;        # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET 3;      # nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            SWAP;       # pair (address %to_) (pair (nat %token_id) (nat %amount)) : nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP;        # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %to_) (pair (nat %token_id) (nat %amount)) : nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUG 3;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            CAR;        # address : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            PAIR;       # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            # token_context = sp.local("token_context", self.data.token_context[tx.token_id]) # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP 7;      # @storage : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP 4;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET 3;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            IF_NONE
                              {
                                PUSH int 283; # int : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            # if sp.contract(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs")), token_context.value.validate_transfer_rule_contract, entry_point='validate_transfer').is_some(): # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            GET 4;      # address : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            CONTRACT %validate_transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))); # option (contract (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                            IF_NONE
                              {}
                              {
                                DROP;       # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                                # sp.transfer(transfer, sp.tez(0), sp.contract(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs")), token_context.value.validate_transfer_rule_contract, entry_point='validate_transfer').open_some()) # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                                DIG 5;      # list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                SWAP;       # @some : list operation : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                DUP;        # @some : @some : list operation : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                DUG 2;      # @some : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                GET 4;      # address : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                CONTRACT %validate_transfer (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))); # option (contract (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))) : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                IF_NONE
                                  {
                                    PUSH int 286; # int : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                    FAILWITH;   # FAILED
                                  }
                                  {}; # @some : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                PUSH mutez 0; # mutez : @some : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                DUP 8;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : mutez : @some : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                TRANSFER_TOKENS; # operation : list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                CONS;       # list operation : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @parameter%transfer : @storage
                                DUG 5;      # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                              }; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            # sp.verify((transfer.from_ == sp.sender) | (self.data.operators.contains(sp.set_type_expr(sp.record(token_id = tx.token_id, owner = transfer.from_, operator = sp.sender), sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("token_id", ("owner", "operator")))))), 'FA2_NOT_OWNER') # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            SENDER;     # @sender : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            DUP 6;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @sender : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            CAR;        # address : @sender : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            COMPARE;    # int : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            EQ;         # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            IF
                              {
                                PUSH bool True; # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                              }
                              {
                                DUP 8;      # @storage : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET 6;      # big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                SENDER;     # @sender : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP 7;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @sender : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                CAR;        # address : @sender : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP 7;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : address : @sender : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET 3;      # nat : address : @sender : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                PAIR 3;     # pair nat (pair address @sender) : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                MEM;        # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                              }; # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            IF
                              {}
                              {
                                PUSH string "FA2_NOT_OWNER"; # string : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                FAILWITH;   # FAILED
                              }; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            # sp.verify(self.data.token_metadata.contains(tx.token_id), 'FA2_TOKEN_UNDEFINED') # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            DUP 8;      # @storage : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            GET 7;      # big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            DUP 5;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            GET 3;      # nat : big_map nat (pair (nat %token_id) (map %token_metadata string bytes)) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            MEM;        # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            IF
                              {}
                              {
                                PUSH string "FA2_TOKEN_UNDEFINED"; # string : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                FAILWITH;   # FAILED
                              }; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            # sp.verify(~ token_context.value.is_paused, 'CM_TOKEN_PAUSED') # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            CDR;        # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            IF
                              {
                                PUSH string "CM_TOKEN_PAUSED"; # string : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                FAILWITH;   # FAILED
                              }
                              {}; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            # if tx.amount > 0: # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            PUSH nat 0; # nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            DUP 5;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            GET 4;      # nat : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            COMPARE;    # int : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            GT;         # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                            IF
                              {
                                # sp.verify(self.data.ledger[from_user.value] >= tx.amount, 'FA2_INSUFFICIENT_BALANCE') # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP 4;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET 4;      # nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP 9;      # @storage : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP 5;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET;        # option nat : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                IF_NONE
                                  {
                                    PUSH int 292; # int : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    FAILWITH;   # FAILED
                                  }
                                  {}; # @some : nat : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                COMPARE;    # int : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GE;         # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                IF
                                  {}
                                  {
                                    PUSH string "FA2_INSUFFICIENT_BALANCE"; # string : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    FAILWITH;   # FAILED
                                  }; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                # if token_context.value.next_snapshot.is_some(): # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                GET 3;      # option timestamp : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                IF_NONE
                                  {}
                                  {
                                    DROP;       # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    # if token_context.value.next_snapshot.open_some() < sp.now: # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    GET 3;      # option timestamp : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    IF_NONE
                                      {
                                        PUSH int 295; # int : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    NOW;        # @now : @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    COMPARE;    # int : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    GT;         # bool : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                    IF
                                      {
                                        # if token_context.value.current_snapshot.is_some(): # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                        DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                        CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                        CAR;        # option timestamp : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                        IF_NONE
                                          {}
                                          {
                                            DROP;       # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                            # self.data.snapshot_lookup[sp.set_type_expr(sp.record(snapshot_timestamp = token_context.value.current_snapshot.open_some(), token_id = tx.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id")))] = token_context.value.next_snapshot.open_some() # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                                            DIG 7;      # @storage : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            SWAP;       # pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            UNPAIR;     # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            SWAP;       # pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            UNPAIR;     # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            DUP 6;      # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            GET 3;      # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            IF_NONE
                                              {
                                                PUSH int 298; # int : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                                FAILWITH;   # FAILED
                                              }
                                              {}; # @some : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            SOME;       # option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            DUP 10;     # pair (address %to_) (pair (nat %token_id) (nat %amount)) : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            GET 3;      # nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            DUP 8;      # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused) : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            CAR;        # option timestamp : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            IF_NONE
                                              {
                                                PUSH int 297; # int : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                                FAILWITH;   # FAILED
                                              }
                                              {}; # @some : nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            PAIR;       # pair @some nat : option timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            UPDATE;     # big_map (pair timestamp nat) timestamp : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            PAIR;       # pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            PAIR;       # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            PAIR;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                            DUG 7;      # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                          }; # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        # token_context.value.current_snapshot = token_context.value.next_snapshot # @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DUP;        # @some : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # pair (option %current_snapshot timestamp) (bool %is_paused) : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        CDR;        # bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : @some : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DIG 2;      # @some : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        GET 3;      # option timestamp : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        PAIR;       # pair (option timestamp) bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        PAIR;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        # token_context.value.next_snapshot = sp.none # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        NONE timestamp; # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UPDATE 3;   # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        # self.data.token_context[tx.token_id] = token_context.value # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DIG 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP 3;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        SOME;       # option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP 7;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET 3;      # nat : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        UPDATE 5;   # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUG 7;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                      }
                                      {}; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # if token_context.value.current_snapshot.is_some(): # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                IF_NONE
                                  {
                                    DROP;       # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }
                                  {
                                    DROP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    # from_snapshot_ledger_key = sp.local("from_snapshot_ledger_key", sp.record(token_id = tx.token_id, owner = transfer.from_, snapshot_timestamp = token_context.value.current_snapshot.open_some()), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # pair (option timestamp) bool : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # option timestamp : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    IF_NONE
                                      {
                                        PUSH int 304; # int : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 6;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 6;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 3;      # nat : address : @some : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    PAIR 3;     # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    # to_snapshot_ledger_key = sp.local("to_snapshot_ledger_key", sp.record(token_id = tx.token_id, owner = tx.to_, snapshot_timestamp = token_context.value.current_snapshot.open_some()), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP;        # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUG 2;      # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # pair (option timestamp) bool : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # option timestamp : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    IF_NONE
                                      {
                                        PUSH int 305; # int : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DIG 5;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP;        # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %to_) (pair (nat %token_id) (nat %amount)) : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # address : pair (address %to_) (pair (nat %token_id) (nat %amount)) : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (address %to_) (pair (nat %token_id) (nat %amount)) : address : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP;        # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %to_) (pair (nat %token_id) (nat %amount)) : address : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUG 7;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : address : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 3;      # nat : address : @some : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    PAIR 3;     # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    # if ~ (self.data.snapshot_ledger.contains(from_snapshot_ledger_key.value)): # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 10;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 3;      # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 3;      # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    MEM;        # bool : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    IF
                                      {}
                                      {
                                        # self.data.snapshot_ledger[from_snapshot_ledger_key.value] = self.data.ledger.get(from_user.value, default_value = 0) # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DUP 10;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        SWAP;       # pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DIG 13;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP 10;     # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET;        # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        IF_NONE
                                          {
                                            PUSH nat 0; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                          }
                                          {}; # nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        SOME;       # option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP 7;      # pair nat (pair address @some) : option nat : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        UPDATE;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUG 9;      # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                      }; # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    # if ~ (self.data.snapshot_ledger.contains(to_snapshot_ledger_key.value)): # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 10;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 3;      # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    CAR;        # big_map (pair nat (pair address timestamp)) nat : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair nat (pair address @some) : big_map (pair nat (pair address timestamp)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP;        # pair nat (pair address @some) : pair nat (pair address @some) : big_map (pair nat (pair address timestamp)) nat : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUG 2;      # pair nat (pair address @some) : big_map (pair nat (pair address timestamp)) nat : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    MEM;        # bool : pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    IF
                                      {
                                        DROP 3;     # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                      }
                                      {
                                        SWAP;       # pair nat (pair address @some) : pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DROP;       # pair nat (pair address @some) : pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        SWAP;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DROP;       # pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        # self.data.snapshot_ledger[to_snapshot_ledger_key.value] = self.data.ledger.get(to_user.value, default_value = 0) # pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DUP 8;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        SWAP;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        UNPAIR;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                        DIG 11;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUP 7;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        GET;        # option nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        IF_NONE
                                          {
                                            PUSH nat 0; # nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                          }
                                          {}; # nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        SOME;       # option nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair nat (pair address @some) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DIG 5;      # pair nat (pair address @some) : option nat : big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        UPDATE;     # big_map (pair nat (pair address timestamp)) nat : pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        SWAP;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        DUG 6;      # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                      }; # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # if tx.amount >= 0: # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PUSH nat 0; # nat : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 4;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : nat : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GET 4;      # nat : nat : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                COMPARE;    # int : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GE;         # bool : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                IF
                                  {
                                    # self.data.ledger[from_user.value] = sp.as_nat(self.data.ledger[from_user.value] - tx.amount) # pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 8;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 4;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DIG 12;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUP 9;      # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    GET;        # option nat : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    IF_NONE
                                      {
                                        PUSH int 312; # int : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SUB;        # int : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    ISNAT;      # option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    IF_NONE
                                      {
                                        PUSH int 312; # int : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                        FAILWITH;   # FAILED
                                      }
                                      {}; # @some : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SOME;       # option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUP 8;      # pair address nat : option nat : big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    # self.data.ledger[to_user.value] = self.data.ledger.get(to_user.value, default_value = 0) + tx.amount # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUP;        # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUG 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    SWAP;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    UNPAIR;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DUP 8;      # pair (address %to_) (pair (nat %token_id) (nat %amount)) : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    GET 4;      # nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DIG 12;     # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    GET 5;      # big_map (pair address nat) nat : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUP 8;      # pair address nat : big_map (pair address nat) nat : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    GET;        # option nat : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    IF_NONE
                                      {
                                        PUSH nat 0; # nat : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                      }
                                      {}; # nat : nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    ADD;        # nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SOME;       # option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DIG 6;      # pair address nat : option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUG 5;      # pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }
                                  {
                                    DROP;       # pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                # if self.data.ledger[from_user.value] == 0: # pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                PUSH nat 0; # nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 7;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GET 5;      # big_map (pair address nat) nat : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                DUP 3;      # pair address nat : big_map (pair address nat) nat : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                GET;        # option nat : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                IF_NONE
                                  {
                                    PUSH int 315; # int : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    FAILWITH;   # FAILED
                                  }
                                  {}; # @some : nat : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                COMPARE;    # int : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                EQ;         # bool : pair address nat : pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                IF
                                  {
                                    SWAP;       # pair (address %to_) (pair (nat %token_id) (nat %amount)) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DROP;       # pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    # del self.data.ledger[from_user.value] # pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                    DIG 4;      # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UNPAIR;     # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UNPAIR;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    NONE nat;   # option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair address nat : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DIG 6;      # pair address nat : option nat : big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    UPDATE;     # big_map (pair address nat) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # big_map address bytes : pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))))
                                    DUG 3;      # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }
                                  {
                                    DROP 2;     # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                                  }; # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {
                                DROP 4;     # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : @storage
                              }; # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : list (pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map (pair nat (pair address timestamp)) nat) (pair (big_map (pair timestamp nat) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # pair (address %from_) (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount)))) : list operation : @parameter%transfer : @storage
                        DROP;       # list operation : @parameter%transfer : @storage
                      }; # list operation : @parameter%transfer : @storage
                    SWAP;       # @parameter%transfer : list operation : @storage
                    DROP;       # list operation : @storage
                  }; # list operation : @storage
              }
              {
                IF_LEFT
                  {
                    # == unpause ==
                    # for token_id in params: ... # @parameter%unpause : @storage
                    DUP;        # @parameter%unpause : @parameter%unpause : @storage
                    ITER
                      {
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # nat : @parameter%unpause : @storage
                        PUSH nat 1; # nat : nat : @parameter%unpause : @storage
                        DUP 4;      # @storage : nat : nat : @parameter%unpause : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : nat : @parameter%unpause : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : nat : @parameter%unpause : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%unpause : @storage
                        DUP 3;      # nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%unpause : @storage
                        SENDER;     # @sender : nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%unpause : @storage
                        PAIR;       # pair @sender nat : big_map (pair (address %owner) (nat %token_id)) nat : nat : nat : @parameter%unpause : @storage
                        GET;        # option nat : nat : nat : @parameter%unpause : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : nat : @parameter%unpause : @storage
                          }
                          {}; # nat : nat : nat : list nat : @storage
                        COMPARE;    # int : nat : list nat : @storage
                        EQ;         # bool : nat : list nat : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : nat : list nat : @storage
                            FAILWITH;   # FAILED
                          }; # nat : list nat : @storage
                        # self.data.token_context[token_id].is_paused = False # nat : list nat : @storage
                        DIG 2;      # @storage : nat : list nat
                        DUP;        # @storage : @storage : nat : list nat
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP;        # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP 4;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP;        # nat : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUG 2;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        IF_NONE
                          {
                            PUSH int 215; # int : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UNPAIR;     # pair (option %current_snapshot timestamp) (bool %is_paused) : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        CAR;        # option timestamp : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PUSH bool False; # bool : option timestamp : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SWAP;       # option timestamp : bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PAIR;       # pair (option timestamp) bool : pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        PAIR;       # pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SOME;       # option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SWAP;       # nat : option (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UPDATE;     # big_map nat (pair (pair (option timestamp) bool) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        UPDATE 5;   # @storage : nat : list nat
                        # self.data.token_context[token_id] = self.data.token_context[token_id] # @storage : nat : list nat
                        DUP;        # @storage : @storage : nat : list nat
                        DUG 3;      # @storage : nat : list nat : @storage
                        DUP;        # @storage : @storage : nat : list nat : @storage
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat : @storage
                        DIG 4;      # @storage : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DUP 4;      # nat : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        IF_NONE
                          {
                            PUSH int 214; # int : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        SOME;       # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : nat : list nat
                        DIG 3;      # nat : option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list nat
                        UPDATE;     # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : list nat
                        UPDATE 5;   # @storage : list nat
                        SWAP;       # list nat : @storage
                      }; # @parameter%unpause : @storage
                    DROP;       # @storage
                  }
                  {
                    IF_LEFT
                      {
                        # == unschedule_snapshot ==
                        # sp.verify(self.data.administrators.get(sp.set_type_expr(sp.record(owner = sp.sender, token_id = params), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))), default_value = 0) == 1, 'ADM_NOT_ADMIN') # @parameter%unschedule_snapshot : @storage
                        PUSH nat 1; # nat : @parameter%unschedule_snapshot : @storage
                        DUP 3;      # @storage : nat : @parameter%unschedule_snapshot : @storage
                        CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : nat : @parameter%unschedule_snapshot : @storage
                        CAR;        # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : nat : @parameter%unschedule_snapshot : @storage
                        CDR;        # big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%unschedule_snapshot : @storage
                        DUP 3;      # @parameter%unschedule_snapshot : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%unschedule_snapshot : @storage
                        SENDER;     # @sender : @parameter%unschedule_snapshot : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%unschedule_snapshot : @storage
                        PAIR;       # pair @sender @parameter%unschedule_snapshot : big_map (pair (address %owner) (nat %token_id)) nat : nat : @parameter%unschedule_snapshot : @storage
                        GET;        # option nat : nat : @parameter%unschedule_snapshot : @storage
                        IF_NONE
                          {
                            PUSH nat 0; # nat : nat : @parameter%unschedule_snapshot : @storage
                          }
                          {}; # nat : nat : @parameter%unschedule_snapshot : @storage
                        COMPARE;    # int : @parameter%unschedule_snapshot : @storage
                        EQ;         # bool : @parameter%unschedule_snapshot : @storage
                        IF
                          {}
                          {
                            PUSH string "ADM_NOT_ADMIN"; # string : @parameter%unschedule_snapshot : @storage
                            FAILWITH;   # FAILED
                          }; # @parameter%unschedule_snapshot : @storage
                        SWAP;       # @storage : @parameter%unschedule_snapshot
                        # self.data.token_context[params].next_snapshot = sp.none # @storage : @parameter%unschedule_snapshot
                        DUP;        # @storage : @storage : @parameter%unschedule_snapshot
                        GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%unschedule_snapshot
                        DUP;        # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage : @parameter%unschedule_snapshot
                        DIG 3;      # @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        DUP;        # @parameter%unschedule_snapshot : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        DUG 2;      # @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        IF_NONE
                          {
                            PUSH int 241; # int : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                            FAILWITH;   # FAILED
                          }
                          {}; # @some : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        NONE timestamp; # option timestamp : @some : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        UPDATE 3;   # @some : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        SOME;       # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter%unschedule_snapshot : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        SWAP;       # @parameter%unschedule_snapshot : option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        UPDATE;     # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @storage
                        UPDATE 5;   # @storage
                      }
                      {
                        # == update_operators ==
                        # for update_operator in params: ... # @parameter%update_operators : @storage
                        DUP;        # @parameter%update_operators : @parameter%update_operators : @storage
                        ITER
                          {
                            # with update_operator.match_cases(...): # or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id))) : @parameter%update_operators : @storage
                            IF_LEFT
                              {
                                # sp.verify(add_operator.owner == sp.sender, 'FA2_NOT_OWNER') # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                CAR;        # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                SENDER;     # @sender : address : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                COMPARE;    # int : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                EQ;         # bool : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                IF
                                  {}
                                  {
                                    PUSH string "FA2_NOT_OWNER"; # string : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                    FAILWITH;   # FAILED
                                  }; # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                # self.data.operators[sp.set_type_expr(sp.record(token_id = add_operator.token_id, owner = add_operator.owner, operator = add_operator.operator), sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("token_id", ("owner", "operator"))))] = sp.unit # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                DIG 2;      # @storage : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                PUSH (option unit) (Some Unit); # option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                DIG 6;      # pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                GET 3;      # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                CAR;        # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (address %owner) (pair (address %operator) (nat %token_id)) : address : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                GET 4;      # nat : address : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR 3;     # pair nat (pair address address) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                UPDATE;     # big_map (pair nat (pair address address)) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair nat (pair address address)) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # big_map address bytes : pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : @parameter%update_operators
                                SWAP;       # @parameter%update_operators : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }
                              {
                                # sp.verify(remove_operator.owner == sp.sender, 'FA2_NOT_OWNER') # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                CAR;        # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                SENDER;     # @sender : address : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                COMPARE;    # int : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                EQ;         # bool : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                IF
                                  {}
                                  {
                                    PUSH string "FA2_NOT_OWNER"; # string : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                    FAILWITH;   # FAILED
                                  }; # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                # del self.data.operators[sp.set_type_expr(sp.record(token_id = remove_operator.token_id, owner = remove_operator.owner, operator = remove_operator.operator), sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("token_id", ("owner", "operator"))))] # pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators : @storage
                                DIG 2;      # @storage : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # big_map address bytes : pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                UNPAIR;     # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                SWAP;       # big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                NONE unit;  # option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : pair (address %owner) (pair (address %operator) (nat %token_id)) : @parameter%update_operators
                                DIG 6;      # pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                GET 3;      # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                DUP;        # pair (address %owner) (pair (address %operator) (nat %token_id)) : pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                CAR;        # address : pair (address %owner) (pair (address %operator) (nat %token_id)) : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (address %owner) (pair (address %operator) (nat %token_id)) : address : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                GET 4;      # nat : address : address : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR 3;     # pair nat (pair address address) : option unit : big_map (pair (nat %token_id) (pair (address %owner) (address %operator))) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                UPDATE;     # big_map (pair nat (pair address address)) unit : big_map (pair (address %owner) (nat %token_id)) nat : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # big_map (pair (address %owner) (nat %token_id)) nat : big_map (pair nat (pair address address)) unit : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit) : big_map address bytes : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # big_map address bytes : pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)) : pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                SWAP;       # pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat) : pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit))) : pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))) : @parameter%update_operators
                                PAIR;       # pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))) : @parameter%update_operators
                                SWAP;       # @parameter%update_operators : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                              }; # list (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id))) (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))) : pair (pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map address bytes) (pair (big_map (pair (address %owner) (nat %token_id)) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
                          }; # @parameter%update_operators : @storage
                        DROP;       # @storage
                      }; # @storage
                  }; # @storage
                NIL operation; # list operation : @storage
              }; # list operation : @storage
          }; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit)))) (pair (pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
      }; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
    NIL operation; # list operation : list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
    SWAP;       # list operation : list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
    ITER
      {
        CONS;       # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
      }; # list operation : pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat))))
    PAIR;       # pair (list operation) (pair (pair (pair (map address unit) (big_map (pair address nat) nat)) (pair (big_map address bytes) (pair (big_map (pair address nat) nat) (big_map (pair nat (pair address address)) unit)))) (pair (pair (big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat))) (pair (big_map %token_context nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))) (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_metadata string bytes))) (big_map %total_supply nat nat)))))
  };
view
  "view_balance_of" (pair (address %owner) (nat %token_id)) nat
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # sp.result(self.data.ledger[params]) # @storage : @parameter
    CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter
    GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : @parameter
    SWAP;       # @parameter : big_map (pair (address %owner) (nat %token_id)) nat
    GET;        # option nat
    IF_NONE
      {
        PUSH int 328; # int
        FAILWITH;   # FAILED
      }
      {}; # @some
  };
view
  "view_current_snapshot" nat (option timestamp)
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # sp.result(self.data.token_context[params].current_snapshot) # @storage : @parameter
    GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter
    SWAP;       # @parameter : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))
    GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))
    IF_NONE
      {
        PUSH int 334; # int
        FAILWITH;   # FAILED
      }
      {}; # @some
    CAR;        # pair (option %current_snapshot timestamp) (bool %is_paused)
    CAR;        # option timestamp
  };
view
  "view_next_snapshot" nat (option timestamp)
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # sp.result(self.data.token_context[params].next_snapshot) # @storage : @parameter
    GET 5;      # big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract))) : @parameter
    SWAP;       # @parameter : big_map nat (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))
    GET;        # option (pair (pair (option %current_snapshot timestamp) (bool %is_paused)) (pair (option %next_snapshot timestamp) (address %validate_transfer_rule_contract)))
    IF_NONE
      {
        PUSH int 340; # int
        FAILWITH;   # FAILED
      }
      {}; # @some
    GET 3;      # option timestamp
  };
view
  "view_snapshot_balance_of" (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # if self.data.snapshot_ledger.contains(params): # @storage : @parameter
    DUP;        # @storage : @storage : @parameter
    DUG 2;      # @storage : @parameter : @storage
    GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter : @storage
    CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : @parameter : @storage
    SWAP;       # @parameter : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : @storage
    DUP;        # @parameter : @parameter : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : @storage
    DUG 2;      # @parameter : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : @parameter : @storage
    MEM;        # bool : @parameter : @storage
    IF
      {
        SWAP;       # @storage : @parameter
        # sp.result(self.data.snapshot_ledger[params]) # @storage : @parameter
        GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter
        CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : @parameter
        SWAP;       # @parameter : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat
        GET;        # option nat
        IF_NONE
          {
            PUSH int 368; # int
            FAILWITH;   # FAILED
          }
          {}; # @some
      }
      {
        # keep_loop = sp.local("keep_loop", True) # @parameter : @storage
        PUSH bool True; # bool : @parameter : @storage
        SWAP;       # @parameter : bool : @storage
        # current_snapshot_lookup_key = sp.local("current_snapshot_lookup_key", sp.record(snapshot_timestamp = params.snapshot_timestamp, token_id = params.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id"))) # @parameter : bool : @storage
        DUP;        # @parameter : @parameter : bool : @storage
        CAR;        # nat : @parameter : bool : @storage
        SWAP;       # @parameter : nat : bool : @storage
        DUP;        # @parameter : @parameter : nat : bool : @storage
        DUG 3;      # @parameter : nat : bool : @parameter : @storage
        GET 4;      # timestamp : nat : bool : @parameter : @storage
        PAIR;       # pair timestamp nat : bool : @parameter : @storage
        # current_snapshot_ledger_key = sp.local("current_snapshot_ledger_key", sp.record(token_id = params.token_id, owner = params.owner, snapshot_timestamp = current_snapshot_lookup_key.value.snapshot_timestamp), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair timestamp nat : bool : @parameter : @storage
        DUP;        # pair timestamp nat : pair timestamp nat : bool : @parameter : @storage
        CAR;        # timestamp : pair timestamp nat : bool : @parameter : @storage
        DIG 3;      # @parameter : timestamp : pair timestamp nat : bool : @storage
        DUP;        # @parameter : @parameter : timestamp : pair timestamp nat : bool : @storage
        GET 3;      # address : @parameter : timestamp : pair timestamp nat : bool : @storage
        SWAP;       # @parameter : address : timestamp : pair timestamp nat : bool : @storage
        DUP;        # @parameter : @parameter : address : timestamp : pair timestamp nat : bool : @storage
        DUG 5;      # @parameter : address : timestamp : pair timestamp nat : bool : @parameter : @storage
        CAR;        # nat : address : timestamp : pair timestamp nat : bool : @parameter : @storage
        PAIR 3;     # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        # while keep_loop.value : ... # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        DUP 3;      # bool : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        LOOP
          {
            # if self.data.snapshot_lookup.contains(current_snapshot_lookup_key.value): # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            DUP 5;      # @storage : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            GET 3;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            DUP 3;      # pair timestamp nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            MEM;        # bool : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            IF
              {
                DROP;       # pair timestamp nat : bool : @parameter : @storage
                # current_snapshot_lookup_key.value = sp.set_type_expr(sp.record(snapshot_timestamp = self.data.snapshot_lookup[current_snapshot_lookup_key.value], token_id = params.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id"))) # pair timestamp nat : bool : @parameter : @storage
                DUP 3;      # @parameter : pair timestamp nat : bool : @parameter : @storage
                CAR;        # nat : pair timestamp nat : bool : @parameter : @storage
                DUP 5;      # @storage : nat : pair timestamp nat : bool : @parameter : @storage
                GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : nat : pair timestamp nat : bool : @parameter : @storage
                GET 3;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : nat : pair timestamp nat : bool : @parameter : @storage
                DIG 2;      # pair timestamp nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : nat : bool : @parameter : @storage
                GET;        # option timestamp : nat : bool : @parameter : @storage
                IF_NONE
                  {
                    PUSH int 375; # int : nat : bool : @parameter : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : bool : @parameter : @storage
                PAIR;       # pair @some nat : bool : @parameter : @storage
                # current_snapshot_ledger_key.value = sp.set_type_expr(sp.record(token_id = params.token_id, owner = params.owner, snapshot_timestamp = current_snapshot_lookup_key.value.snapshot_timestamp), sp.TRecord(owner = sp.TAddress, snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("token_id", ("owner", "snapshot_timestamp")))) # pair @some nat : bool : @parameter : @storage
                DUP;        # pair @some nat : pair @some nat : bool : @parameter : @storage
                CAR;        # @some : pair @some nat : bool : @parameter : @storage
                DIG 3;      # @parameter : @some : pair @some nat : bool : @storage
                DUP;        # @parameter : @parameter : @some : pair @some nat : bool : @storage
                GET 3;      # address : @parameter : @some : pair @some nat : bool : @storage
                SWAP;       # @parameter : address : @some : pair @some nat : bool : @storage
                DUP;        # @parameter : @parameter : address : @some : pair @some nat : bool : @storage
                DUG 5;      # @parameter : address : @some : pair @some nat : bool : @parameter : @storage
                CAR;        # nat : address : @some : pair @some nat : bool : @parameter : @storage
                PAIR 3;     # pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                # if self.data.snapshot_ledger.contains(current_snapshot_ledger_key.value): # pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                DUP 5;      # @storage : pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                SWAP;       # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair @some nat : bool : @parameter : @storage
                DUP;        # pair nat (pair address @some) : pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair @some nat : bool : @parameter : @storage
                DUG 2;      # pair nat (pair address @some) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                MEM;        # bool : pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                IF
                  {
                    DIG 2;      # bool : pair nat (pair address @some) : pair @some nat : @parameter : @storage
                    DROP;       # pair nat (pair address @some) : pair @some nat : @parameter : @storage
                    # keep_loop.value = False # pair nat (pair address @some) : pair @some nat : @parameter : @storage
                    PUSH bool False; # bool : pair nat (pair address @some) : pair @some nat : @parameter : @storage
                    DUG 2;      # pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
                  }
                  {}; # pair nat (pair address @some) : pair @some nat : bool : @parameter : @storage
              }
              {
                DIG 2;      # bool : pair nat (pair address timestamp) : pair timestamp nat : @parameter : @storage
                DROP;       # pair nat (pair address timestamp) : pair timestamp nat : @parameter : @storage
                # keep_loop.value = False # pair nat (pair address timestamp) : pair timestamp nat : @parameter : @storage
                PUSH bool False; # bool : pair nat (pair address timestamp) : pair timestamp nat : @parameter : @storage
                DUG 2;      # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
              }; # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            # check for next loop: keep_loop.value # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
            DUP 3;      # bool : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
          }; # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        # if self.data.snapshot_ledger.contains(current_snapshot_ledger_key.value): # pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        DUP 5;      # @storage : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        SWAP;       # pair nat (pair address timestamp) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair timestamp nat : bool : @parameter : @storage
        DUP;        # pair nat (pair address timestamp) : pair nat (pair address timestamp) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair timestamp nat : bool : @parameter : @storage
        DUG 2;      # pair nat (pair address timestamp) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        MEM;        # bool : pair nat (pair address timestamp) : pair timestamp nat : bool : @parameter : @storage
        IF
          {
            SWAP;       # pair timestamp nat : pair nat (pair address timestamp) : bool : @parameter : @storage
            DROP;       # pair nat (pair address timestamp) : bool : @parameter : @storage
            SWAP;       # bool : pair nat (pair address timestamp) : @parameter : @storage
            DROP;       # pair nat (pair address timestamp) : @parameter : @storage
            SWAP;       # @parameter : pair nat (pair address timestamp) : @storage
            DROP;       # pair nat (pair address timestamp) : @storage
            SWAP;       # @storage : pair nat (pair address timestamp)
            # sp.result(self.data.snapshot_ledger[current_snapshot_ledger_key.value]) # @storage : pair nat (pair address timestamp)
            GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair nat (pair address timestamp)
            CAR;        # big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat : pair nat (pair address timestamp)
            SWAP;       # pair nat (pair address timestamp) : big_map (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat
            GET;        # option nat
            IF_NONE
              {
                PUSH int 382; # int
                FAILWITH;   # FAILED
              }
              {}; # @some
          }
          {
            DROP 3;     # @parameter : @storage
            SWAP;       # @storage : @parameter
            # sp.result(self.data.ledger[sp.set_type_expr(sp.record(owner = params.owner, token_id = params.token_id), sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))]) # @storage : @parameter
            CAR;        # pair (pair (map %administrator_allowmap address unit) (big_map %administrators (pair (address %owner) (nat %token_id)) nat)) (pair (big_map %identities address bytes) (pair (big_map %ledger (pair (address %owner) (nat %token_id)) nat) (big_map %operators (pair (nat %token_id) (pair (address %owner) (address %operator))) unit))) : @parameter
            GET 5;      # big_map (pair (address %owner) (nat %token_id)) nat : @parameter
            SWAP;       # @parameter : big_map (pair (address %owner) (nat %token_id)) nat
            DUP;        # @parameter : @parameter : big_map (pair (address %owner) (nat %token_id)) nat
            CAR;        # nat : @parameter : big_map (pair (address %owner) (nat %token_id)) nat
            SWAP;       # @parameter : nat : big_map (pair (address %owner) (nat %token_id)) nat
            GET 3;      # address : nat : big_map (pair (address %owner) (nat %token_id)) nat
            PAIR;       # pair address nat : big_map (pair (address %owner) (nat %token_id)) nat
            GET;        # option nat
            IF_NONE
              {
                PUSH int 384; # int
                FAILWITH;   # FAILED
              }
              {}; # @some
          }; # @some
      }; # @some
  };
view
  "view_snapshot_total_supply" (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # if self.data.snapshot_total_supply.contains(params): # @storage : @parameter
    DUP;        # @storage : @storage : @parameter
    DUG 2;      # @storage : @parameter : @storage
    GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter : @storage
    GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter : @storage
    SWAP;       # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @storage
    DUP;        # @parameter : @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @storage
    DUG 2;      # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter : @storage
    MEM;        # bool : @parameter : @storage
    IF
      {
        SWAP;       # @storage : @parameter
        # sp.result(self.data.snapshot_total_supply[params]) # @storage : @parameter
        GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter
        GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter
        SWAP;       # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat
        GET;        # option nat
        IF_NONE
          {
            PUSH int 347; # int
            FAILWITH;   # FAILED
          }
          {}; # @some
      }
      {
        # keep_loop = sp.local("keep_loop", True) # @parameter : @storage
        PUSH bool True; # bool : @parameter : @storage
        SWAP;       # @parameter : bool : @storage
        # current_snapshot_lookup_key = sp.local("current_snapshot_lookup_key", params) # @parameter : bool : @storage
        DUP;        # @parameter : @parameter : bool : @storage
        DUG 2;      # @parameter : bool : @parameter : @storage
        SWAP;       # bool : @parameter : @parameter : @storage
        # while keep_loop.value : ... # bool : @parameter : @parameter : @storage
        DUP;        # bool : bool : @parameter : @parameter : @storage
        DUG 2;      # bool : @parameter : bool : @parameter : @storage
        LOOP
          {
            # if self.data.snapshot_lookup.contains(current_snapshot_lookup_key.value): # @parameter : bool : @parameter : @storage
            DUP 4;      # @storage : @parameter : bool : @parameter : @storage
            GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter : bool : @parameter : @storage
            GET 3;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : @parameter : bool : @parameter : @storage
            SWAP;       # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : bool : @parameter : @storage
            DUP;        # @parameter : @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : bool : @parameter : @storage
            DUG 2;      # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : @parameter : bool : @parameter : @storage
            MEM;        # bool : @parameter : bool : @parameter : @storage
            IF
              {
                # current_snapshot_lookup_key.value = sp.set_type_expr(sp.record(snapshot_timestamp = self.data.snapshot_lookup[current_snapshot_lookup_key.value], token_id = params.token_id), sp.TRecord(snapshot_timestamp = sp.TTimestamp, token_id = sp.TNat).layout(("snapshot_timestamp", "token_id"))) # @parameter : bool : @parameter : @storage
                DUP 3;      # @parameter : @parameter : bool : @parameter : @storage
                CDR;        # nat : @parameter : bool : @parameter : @storage
                DUP 5;      # @storage : nat : @parameter : bool : @parameter : @storage
                GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : nat : @parameter : bool : @parameter : @storage
                GET 3;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : nat : @parameter : bool : @parameter : @storage
                DIG 2;      # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp : nat : bool : @parameter : @storage
                GET;        # option timestamp : nat : bool : @parameter : @storage
                IF_NONE
                  {
                    PUSH int 353; # int : nat : bool : @parameter : @storage
                    FAILWITH;   # FAILED
                  }
                  {}; # @some : nat : bool : @parameter : @storage
                PAIR;       # pair @some nat : bool : @parameter : @storage
                # if self.data.snapshot_total_supply.contains(current_snapshot_lookup_key.value): # pair @some nat : bool : @parameter : @storage
                DUP 4;      # @storage : pair @some nat : bool : @parameter : @storage
                GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : pair @some nat : bool : @parameter : @storage
                GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : bool : @parameter : @storage
                SWAP;       # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : bool : @parameter : @storage
                DUP;        # pair @some nat : pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : bool : @parameter : @storage
                DUG 2;      # pair @some nat : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : pair @some nat : bool : @parameter : @storage
                MEM;        # bool : pair @some nat : bool : @parameter : @storage
                IF
                  {
                    SWAP;       # bool : pair @some nat : @parameter : @storage
                    DROP;       # pair @some nat : @parameter : @storage
                    # keep_loop.value = False # pair @some nat : @parameter : @storage
                    PUSH bool False; # bool : pair @some nat : @parameter : @storage
                    SWAP;       # pair @some nat : bool : @parameter : @storage
                  }
                  {}; # pair @some nat : bool : @parameter : @storage
              }
              {
                SWAP;       # bool : @parameter : @parameter : @storage
                DROP;       # @parameter : @parameter : @storage
                # keep_loop.value = False # @parameter : @parameter : @storage
                PUSH bool False; # bool : @parameter : @parameter : @storage
                SWAP;       # @parameter : bool : @parameter : @storage
              }; # pair timestamp nat : bool : @parameter : @storage
            SWAP;       # bool : pair timestamp nat : @parameter : @storage
            # check for next loop: keep_loop.value # bool : pair timestamp nat : @parameter : @storage
            DUP;        # bool : bool : pair timestamp nat : @parameter : @storage
            DUG 2;      # bool : pair timestamp nat : bool : @parameter : @storage
          }; # @parameter : bool : @parameter : @storage
        # if self.data.snapshot_total_supply.contains(current_snapshot_lookup_key.value): # @parameter : bool : @parameter : @storage
        DUP 4;      # @storage : @parameter : bool : @parameter : @storage
        GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter : bool : @parameter : @storage
        GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter : bool : @parameter : @storage
        SWAP;       # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : bool : @parameter : @storage
        DUP;        # @parameter : @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : bool : @parameter : @storage
        DUG 2;      # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter : bool : @parameter : @storage
        MEM;        # bool : @parameter : bool : @parameter : @storage
        IF
          {
            SWAP;       # bool : @parameter : @parameter : @storage
            DROP;       # @parameter : @parameter : @storage
            SWAP;       # @parameter : @parameter : @storage
            DROP;       # @parameter : @storage
            SWAP;       # @storage : @parameter
            # sp.result(self.data.snapshot_total_supply[current_snapshot_lookup_key.value]) # @storage : @parameter
            GET 3;      # pair (big_map %snapshot_ledger (pair (nat %token_id) (pair (address %owner) (timestamp %snapshot_timestamp))) nat) (pair (big_map %snapshot_lookup (pair (timestamp %snapshot_timestamp) (nat %token_id)) timestamp) (big_map %snapshot_total_supply (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat)) : @parameter
            GET 4;      # big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat : @parameter
            SWAP;       # @parameter : big_map (pair (timestamp %snapshot_timestamp) (nat %token_id)) nat
            GET;        # option nat
            IF_NONE
              {
                PUSH int 359; # int
                FAILWITH;   # FAILED
              }
              {}; # @some
          }
          {
            DROP 2;     # @parameter : @storage
            SWAP;       # @storage : @parameter
            # sp.result(self.data.total_supply[params.token_id]) # @storage : @parameter
            GET 8;      # big_map nat nat : @parameter
            SWAP;       # @parameter : big_map nat nat
            CDR;        # nat : big_map nat nat
            GET;        # option nat
            IF_NONE
              {
                PUSH int 361; # int
                FAILWITH;   # FAILED
              }
              {}; # @some
          }; # @some
      }; # @some
  };
view
  "view_total_supply" nat nat
  {
    UNPAIR;     # @parameter : @storage
    SWAP;       # @storage : @parameter
    # sp.result(self.data.total_supply[params]) # @storage : @parameter
    GET 8;      # big_map nat nat : @parameter
    SWAP;       # @parameter : big_map nat nat
    GET;        # option nat
    IF_NONE
      {
        PUSH int 322; # int
        FAILWITH;   # FAILED
      }
      {}; # @some
  };